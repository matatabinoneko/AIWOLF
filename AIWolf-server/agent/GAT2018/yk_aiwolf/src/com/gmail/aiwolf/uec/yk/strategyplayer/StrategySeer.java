package com.gmail.aiwolf.uec.yk.strategyplayer;

import org.aiwolf.client.lib.TemplateTalkFactory;
import org.aiwolf.common.data.Agent;
import org.aiwolf.common.data.Role;

import com.gmail.aiwolf.uec.yk.learn.AgentStatistics;
import com.gmail.aiwolf.uec.yk.lib.Judge;


public class StrategySeer extends AbstractBaseStrategyPlayer {


	/**
	 * 繧?��繝ｳ繧?��繝医Λ繧?��繧?��
	 * @param agentStatistics
	 */
	public StrategySeer(AgentStatistics agentStatistics) {
		super(agentStatistics);
	}

	@Override
	public String talk() {

		try{

			String workString;

			// ?��?��?��?��?��?��CO?��?��?��?���?��?
			if( !isCameOut ){
				// CO?��?��?��?��?��?��?��?��?��?��?��?��
				isCameOut = true;

				// ?��?��?��?��?��?��?��?��?��b
				workString = TemplateTalkFactory.comingout(me, Role.SEER);
				return workString;
			}

			// CO?��?��?��?���?�場�?
			if( isCameOut ){

				// ?��?��?��?��?��?��?��?��?�����垂?��鯉ｿ?��?��?��?��?��ゑ?��?�����垂?��?��?��?��?��?��?��?��?��
				if( agi.reportSelfResultCount < agi.selfInspectList.size() ){

					Judge reportJudge = agi.selfInspectList.get( agi.selfInspectList.size() - 1 );

					// ?��?��?�����錐?��みの鯉ｿ?��?��?��?��?��?��?��?��?��?�����揩�?��
					agi.reportSelfResultCount++;

					// ?��?��?��?��?��?��?��?��?��b
					workString = TemplateTalkFactory.divined( Agent.getAgent(reportJudge.targetAgentNo), reportJudge.result );
					return workString;
				}

			}

			// ?��?��?��?��?��?��?��?��?��[?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?�?ゑｿ?��?��?��?��?��ゑ?��?��?��?��?��鼾?��?��?��A?��?��?��V?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��[?��?��?��?��?��?��?��?��?��b?��?��?��?��?��?��
			if( declaredPlanningVoteAgent == null ){
				// ?��?��?��?��?��?��?��?��?��[?��?��?��?��?��?��?��?��?��?��更?��?��?��?��?��?��?��?��?��?��?��?��
				actionUI.voteAgent = planningVoteAgent;
				declaredPlanningVoteAgent = planningVoteAgent;

				// ?��?��?��?�?終�?��?��?��?��?��?��?��?��?��狼?��?��?��?��便擾?��?��[?��?��?��?��?��?��h?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��宣�??��?��?��?��?��?��?��?��?��?��ゑ?��?��?��?��?��B?��?��?��骭?��?��?��?��?��最終�?��?��?��?��?��?��?��?��?��外�?��?��?�?ゑｿ?��?��?��?��?��?��?��
				if( agi.latestGameInfo.getAliveAgentList().size() > 4 ){
					// ?��?��?��?��?��?��?��?��?��b
					String ret = TemplateTalkFactory.vote( Agent.getAgent(planningVoteAgent) );
					return ret;
				}
			}

			// ?��?��?��^?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��T?��?��?��?��人?��?��?��?��?��?��?��?��?��?��上�??��?��?��?��?��?��?��?��?��?�?ゑｿ?��?��?��?��?��ゑ?��?��?��?��?��?��?��?��?��話?��?��?��?��?��?��
			if( agi.talkedSuspicionAgentList.size() < agi.gameSetting.getRoleNumMap().get(Role.WEREWOLF) ){
				// ?��?��?��^?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��b?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��ゑ?��?��?��?��?��謫?��?��?��?��?��?��?��?��?��?��A?��?��?��謫?��?��?��?��?�?ゑｿ?��?��?��?��?�?ゑｿ?��?��?��?��?��?��?��?��話?��?��?��?��?��?��
				workString = getSuspicionTalkString();
				if( workString != null ){
					return workString;
				}
			}

			// ?��?��?��?��?��?��?��?��?��[?��?��?��?��?��?��?��?��?��?��更?��?��?��?��?��?��?��?��?��?��?��?��鼾?��?��?��A?��?��?��V?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��[?��?��?��?��?��?��?��?��?��b?��?��?��?��?��?��
			if( declaredPlanningVoteAgent != planningVoteAgent ){
				// ?��?��?��?��?��?��?��?��?��[?��?��?��?��?��?��?��?��?��?��更?��?��?��?��?��?��?��?��?��?��?��?��
				actionUI.voteAgent = planningVoteAgent;
				declaredPlanningVoteAgent = planningVoteAgent;

				// ?��?��?��?�?終�?��?��?��?��?��?��?��?��?��狼?��?��?��?��便擾?��?��[?��?��?��?��?��?��h?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��宣�??��?��?��?��?��?��?��?��?��?��ゑ?��?��?��?��?��B?��?��?��骭?��?��?��?��?��最終�?��?��?��?��?��?��?��?��?��外�?��?��?�?ゑｿ?��?��?��?��?��?��?��
				if( agi.latestGameInfo.getAliveAgentList().size() > 4 ){
					// ?��?��?��?��?��?��?��?��?��b
					String ret = TemplateTalkFactory.vote( Agent.getAgent(planningVoteAgent) );
					return ret;
				}
			}

			// ?��?��?��M?��?��?��p?��?��?��?��?��?��?��?��?��b?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��ゑ?��?��?��?��?��謫?��?��?��?��?��?��?��?��?��?��A?��?��?��謫?��?��?��?��?�?ゑｿ?��?��?��?��?�?ゑｿ?��?��?��?��?��?��?��?��話?��?��?��?��?��?��
			workString = getTrustTalkString();
			if( workString != null ){
				return workString;
			}

			// ?��?��?��b?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��鼾?��?��?��Aover?��?��?��?��?��?��?��ゑ?��?��
			return TemplateTalkFactory.over();

		}catch(Exception ex){
	        // ?��?��?��?��?��?��O?��?��?��?��?��?��?��?��?��?�?ス?��?��?��?��?��?��?��?��?��[?��?��?��?��?��?��?��?��?��?��?��?��
	        if(isRethrowException){
	            throw ex;
	        }

	        // ?��?��?��?��会ｿ?��?��?��?��A?��?��?��?��?��?��O?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��托?��?��?��擾?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��s?��?��?��?��?��?��(?��?��?��?��ゑ?��?��l?��?��?��?��?��?��?��?��?��?��?��?��?��?��?��驛�?��?��\?��?��?��b?��?��?��h?��?��?��?���?�合�?��?��?��戻ゑｿ?��)

			// ?��?��?��G?��?��?��?��?��?��?��?��?��[?��?��?��?��?��?��?��?��?��?��?��?��over?��?��?��?��?��?��?��ゑ?��?��
			return TemplateTalkFactory.over();

		}

	}


}
